---
phase: 01-content-audit
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/01-content-audit/AUDIT-REPORT.md
  - src/data/stichworteData.ts
autonomous: true
requirements:
  - SYNC-01
  - SYNC-03

must_haves:
  truths:
    - "All 189 Stichwortliste entries have mapped status (linked chapter ID or marked as missing)"
    - "Coverage report shows gaps per Fach (neu2026 topics identified)"
    - "Irrelevant content candidates (chapters not in Stichwortliste) are documented"
  artifacts:
    - path: ".planning/phases/01-content-audit/AUDIT-REPORT.md"
      provides: "Complete coverage mapping: Stichwortliste → Kapitel status"
      min_lines: 100
    - path: "src/data/stichworteData.ts"
      provides: "Complete Stichwortliste with all 189 entries"
      contains: "export const allStichworte"
  key_links:
    - from: ".planning/phases/01-content-audit/AUDIT-REPORT.md"
      to: "src/data/stichworteData.ts"
      via: "Coverage analysis references linkedChapterId"
      pattern: "linkedChapterId.*bio-|ch-|ph-|ma-"
---

<objective>
Map all Stichwortliste entries to chapter implementations and identify coverage gaps.

Purpose: Establish single source of truth for content coverage; every topic is either mapped to an existing chapter or flagged as missing.
Output: AUDIT-REPORT.md documenting complete coverage status, neu2026 topics, and orphaned content.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-content-audit/01-RESEARCH.md
@.planning/phases/01-content-audit/01-CONTEXT.md

@src/data/stichworteData.ts
@src/data/bmsKapitel/types.ts
@src/data/bmsKapitel/index.ts
</context>

<tasks>

<task type="auto">
  <name>Extract all 189 Stichwortliste entries and analyze coverage</name>
  <files>
    src/data/stichworteData.ts
    .planning/phases/01-content-audit/AUDIT-REPORT.md
  </files>
  <action>
Read complete stichworteData.ts (currently shows 106 entries in first 100 lines, but research indicates 189 total entries). Extract all Stichwort entries and analyze:

1. **Count by status:**
   - Total entries: 189
   - Entries with linkedChapterId + abgedeckt: true (mapped)
   - Entries with linkedChapterId but chapter missing (partial mapping)
   - Entries with no linkedChapterId (unmapped)
   - Entries with neu2026: true and abgedeckt: false (new content gaps)

2. **Coverage by Fach:**
   - Biologie: X/81 mapped
   - Chemie: X/13 mapped
   - Physik: X/7 mapped
   - Mathematik: X/6 mapped

3. **Priority distribution:**
   - High priority gaps (priorität: "hoch" + abgedeckt: false)
   - Medium/low priority gaps

4. **Identify orphaned content:**
   - List all Kapitel IDs from alleKapitel (src/data/bmsKapitel/index.ts)
   - Reverse-map: which Kapitel.id values exist but have no Stichwortliste entry pointing to them?
   - These are candidates for deletion (SYNC-03)

Write AUDIT-REPORT.md with structured sections:
- Executive Summary (counts, % coverage)
- Coverage by Fach (table: id, thema, linkedChapterId, status)
- neu2026 Content Gaps (8 topics requiring implementation)
- Orphaned Content (chapters not linked from Stichwortliste)
- Recommendations (priority order for gap filling)

**Note:** Research shows 106 entries extracted so far but 189 expected. If stichworteData.ts only contains 106 entries, document this discrepancy and flag remaining 83 entries as "missing from data file" in the audit report.
  </action>
  <verify>
cat .planning/phases/01-content-audit/AUDIT-REPORT.md and confirm it contains:
- Total entries count (189 or documented discrepancy)
- Coverage breakdown by Fach
- List of neu2026 topics (8 entries with neu2026: true)
- Orphaned content section
- Priority recommendations
  </verify>
  <done>
AUDIT-REPORT.md exists with complete coverage mapping, gap analysis, and orphaned content identification for all Stichwortliste entries.
  </done>
</task>

<task type="auto">
  <name>Validate linkedChapterId integrity and document broken links</name>
  <files>
    .planning/phases/01-content-audit/AUDIT-REPORT.md
  </files>
  <action>
For each Stichwortliste entry with linkedChapterId:
1. Check if corresponding Kapitel exists in alleKapitel using getKapitelById()
2. Verify Kapitel has at least one Unterkapitel
3. Document broken links where:
   - linkedChapterId points to non-existent Kapitel
   - Kapitel exists but has empty unterkapitel array

Add "Broken Links" section to AUDIT-REPORT.md listing:
- Stichwort ID
- linkedChapterId value
- Issue: "Chapter not found" or "Chapter has no Unterkapitel"

This fulfills SYNC-01 requirement: every Stichwortliste entry has either a valid mapped Kapitel or is marked as missing.
  </action>
  <verify>
grep -A 10 "Broken Links" .planning/phases/01-content-audit/AUDIT-REPORT.md confirms section exists with validation results.
  </verify>
  <done>
All linkedChapterId references validated; broken links documented in AUDIT-REPORT.md Broken Links section.
  </done>
</task>

</tasks>

<verification>
- [ ] AUDIT-REPORT.md exists with complete coverage analysis
- [ ] All 189 Stichwortliste entries accounted for (or discrepancy documented)
- [ ] neu2026 topics identified (8 entries)
- [ ] Orphaned content listed (chapters not in Stichwortliste)
- [ ] Broken linkedChapterId links documented
- [ ] Coverage percentages calculated per Fach
</verification>

<success_criteria>
**Measurable completion:**
1. AUDIT-REPORT.md exists with structured sections (Executive Summary, Coverage by Fach, neu2026 Gaps, Orphaned Content, Broken Links)
2. Every Stichwortliste entry has a status: "mapped" (valid linkedChapterId + chapter exists), "partial" (linkedChapterId but no chapter), "unmapped" (no linkedChapterId), or "new content gap" (neu2026 + abgedeckt: false)
3. Report includes recommendation section prioritizing gap closure by priority level and subject
</success_criteria>

<output>
After completion, create `.planning/phases/01-content-audit/01-01-SUMMARY.md`
</output>
